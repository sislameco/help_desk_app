<div class="app-modal">
  <div class="modal-header">
    <h5 class="modal-title">{{ selectedTicket ? 'Update' : 'Create' }} Ticket</h5>
    <button class="close" (click)="modalRef.hide()">
      <svg width="10" viewBox="0 0 10 10">
        <use href="assets/sprite.svg#svg-close"></use>
      </svg>
    </button>
  </div>

  <div class="modal-body">
    <form [formGroup]="form" (ngSubmit)="save()" class="app-form mb-4">
      <div class="row">
        <!-- 游릴 Title -->
        <div class="form-group col-lg-12 mb-3">
          <div class="position-relative">
            <label for="title" class="input-label">Title <span class="text-danger">*</span></label>
            <input
              type="text"
              id="title"
              class="form-control"
              formControlName="title"
              placeholder="Enter title"
            />
          </div>
          <small
            class="text-danger fw-semibold"
            *ngxControlError="form.controls['title']; track: 'required'"
          >
            Title is required.
          </small>
        </div>

        <!-- 游릴 Description -->
        <div class="form-group col-lg-12 mb-3">
          <div class="position-relative">
            <label for="description" class="input-label"
              >Description <span class="text-danger">*</span></label
            >
            <textarea
              type="text"
              id="description"
              class="form-control"
              formControlName="description"
              placeholder="Enter description"
            ></textarea>
          </div>
          <small
            class="text-danger fw-semibold"
            *ngxControlError="form.controls['description']; track: 'required'"
          >
            Description is required.
          </small>
        </div>

        <!-- 游릴 Priority -->
        <div class="form-group col-lg-12 mb-3">
          <div class="position-relative">
            <label for="priorityLevel" class="input-label"
              >Priority Level <span class="text-danger">*</span></label
            >
            <ng-select
              id="priorityLevel"
              class="select-dropdown"
              [items]="priorities"
              bindLabel="key"
              bindValue="value"
              formControlName="priority"
              [searchable]="false"
              placeholder="Select Priority"
            >
            </ng-select>
            <small
              class="text-danger fw-semibold"
              *ngxControlError="form.controls['priority']; track: 'required'"
            >
              Priority level is required.
            </small>
          </div>
        </div>

        <!-- 游릴 QMS type -->
        <div class="form-group col-lg-12 mb-3">
          <div class="position-relative">
            <label for="qmsType" class="input-label"
              >QMS Type <span class="text-danger">*</span></label
            >
            <ng-select
              id="qmsType"
              class="select-dropdown"
              [items]="qmsTypes"
              bindLabel="key"
              bindValue="value"
              formControlName="qmsType"
              [searchable]="false"
              placeholder="Select QMS type"
            >
            </ng-select>
            <small
              class="text-danger fw-semibold"
              *ngxControlError="form.controls['qmsType']; track: 'required'"
            >
              QMS type is required.
            </small>
          </div>
        </div>

        <div class="form-group col-lg-12 mb-3">
          <div class="position-relative">
            <label for="assignedUser" class="input-label">Default Assign User</label>
            <ng-select
              id="assignedUser"
              class="select-dropdown"
              [items]="users()"
              bindLabel="name"
              bindValue="id"
              formControlName="fkAssignedUserId"
              [searchable]="true"
              placeholder="Select user"
            >
            </ng-select>
          </div>
        </div>

        <div class="form-group col-lg-12 mb-3">
          <div class="position-relative">
            <label for="departments" class="input-label">Default Departments</label>
            <ng-select
              id="departments"
              class="select-dropdown"
              [items]="departments()"
              [multiple]="true"
              bindLabel="name"
              bindValue="id"
              [formControlName]="'fkDepartmentIds'"
              [searchable]="true"
              placeholder="Select departments"
            >
            </ng-select>
          </div>
        </div>

        <div class="col-lg-12 form-group d-flex align-items-center">
          <label class="app-form--checkbox" for="enabled"
            ><input type="checkbox" formControlName="isEnabled" id="enabled" /><span
              class="d-flex align-items-center justify-content-center"
              ><svg viewBox="0 0 10 8" fill="none" width="10">
                <use xlink:href="assets/sprite.svg#svg-check"></use></svg
            ></span>
            <p class="mb-0">Enabled</p></label
          >
        </div>
      </div>
      <div class="form-group text-nowrap text-center">
        <button
          type="button"
          class="ch-btn ch-btn-red-border disabled-hover me-3"
          (click)="modalRef.hide()"
        >
          Cancel
        </button>
        <button type="submit" class="ch-btn ch-btn-green">
          {{ selectedTicket ? 'Update' : 'Create' }}
        </button>
      </div>
    </form>
  </div>
</div>
