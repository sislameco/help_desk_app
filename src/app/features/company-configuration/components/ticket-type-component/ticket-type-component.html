<div class="ticket-type-container">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="fw-semibold">Tickets</h4>
    <button class="ch-btn ch-btn-green" (click)="openAddEditModal(null)">Add Ticket</button>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="loading()">Loading...</div>

  <!-- ========================== -->
  <!-- ðŸ“‹ Ticket Type Table -->
  <!-- ========================== -->
  <table class="app-table">
    <thead class="table-light">
      <tr>
        <th>Title</th>
        <th>Description</th>
        <th>QMS Type</th>
        <th>Priority</th>
        <th>Default Assign User</th>
        <th>Default Assign Departments</th>
        <th class="text-center">Enabled</th>
        <th class="text-center">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let t of ticketTypes(); let i = index">
        <td>{{ t.title }}</td>
        <td>{{ t.description }}</td>
        <td>{{ t.qmsType | enumToString: qmsType }}</td>
        <td>
          <span [class]="'badge bg-' + getPriorityColor(t.priority)">
            {{ t.priority | enumToString: enumPriority }}
          </span>
        </td>
        <td>{{ t.userName }}</td>
        <td>
          <span *ngFor="let d of t.departmentNames" class="badge bg-secondary me-1">
            {{ d }}
          </span>
        </td>
        <td class="text-center pe-none">
          <label class="app-form--checkbox" [for]="i" style="padding: 0px !important"
            ><input type="checkbox" [id]="i" [checked]="t.isEnabled" disabled /><span
              class="d-flex align-items-center justify-content-center"
              ><svg viewBox="0 0 10 8" fill="none" width="10">
                <use xlink:href="assets/sprite.svg#svg-check"></use></svg></span
          ></label>
        </td>
        <td class="text-center">
          <div
            class="dropdown-action"
            dropdown
            placement="bottom right"
            container="#dropDownButton_{{ i }}"
          >
            <button dropdownToggle type="button" class="active-btn" id="dropDownButton_{{ i }}">
              <svg fill="currentColor" width="16" viewBox="0 0 18 18">
                <use href="assets/sprite.svg#svg-cog"></use>
              </svg>
            </button>
            <ul *dropdownMenu class="dropdown-menu dropdown-menu-right">
              <li>
                <button class="dropdown-item" (click)="openAddEditModal(t)">
                  <svg width="11" viewBox="0 0 11 10" fill="currentColor">
                    <use href="assets/sprite.svg#edit-s-icon"></use>
                  </svg>
                  Edit
                </button>
              </li>
              <li>
                <button class="dropdown-item" (click)="delete(t.id)">
                  <svg width="12" viewBox="0 0 12 12" fill="currentColor">
                    <use href="assets/sprite.svg#delete-s-icon"></use>
                  </svg>
                  Delete
                </button>
              </li>
            </ul>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
