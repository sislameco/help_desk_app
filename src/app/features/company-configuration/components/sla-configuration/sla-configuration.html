<!-- Header Row -->
<div class="d-flex justify-content-between align-items-center mb-3">
  <h4 class="fw-semibold">SLA Settings</h4>
  <button class="ch-btn ch-btn-green" (click)="openAdd()">Add SLA Rule</button>
</div>

<!-- SLA Summary Tiles -->
<div class="sla-summary row g-3 mb-4">
  <!-- Total Rules -->
  <div class="col-md-3 col-sm-6">
    <div class="card-callout card-callout-warning d-flex align-items-center">
      <div class="card-callout-inner">
        <h5>Total Rules</h5>
        <h3>
          {{ slaSummary().totalRules }}
        </h3>
      </div>
    </div>
  </div>

  <!-- Active Rules -->
  <div class="col-md-3 col-sm-6">
    <div class="card-callout card-callout-success d-flex align-items-center">
      <div class="card-callout-inner">
        <h5>Active Rules</h5>
        <h3>
          {{ slaSummary().activeRules }}
        </h3>
      </div>
    </div>
  </div>

  <!-- Critical Rules -->
  <div class="col-md-3 col-sm-6">
    <div class="card-callout card-callout-danger d-flex align-items-center">
      <div class="card-callout-inner">
        <h5>Critical Rules</h5>
        <h3>
          {{ slaSummary().criticalRules }}
        </h3>
      </div>
    </div>
  </div>

  <!-- Avg Response -->
  <div class="col-md-3 col-sm-6">
    <div class="card-callout card-callout-secondary d-flex align-items-center">
      <div class="card-callout-inner">
        <h5>Avg Response</h5>
        <h3>
          {{ slaSummary().avgResponse }}
        </h3>
      </div>
    </div>
  </div>
</div>

<!-- SLA Rules Table -->
<table class="app-table">
  <thead class="table-light">
    <tr>
      <th>QMS Type</th>
      <th>Ticket Type</th>
      <th>Priority</th>
      <th>Response Time</th>
      <th>Resolution Time</th>
      <th>Escalation Time</th>
      <th>Status</th>
      <th class="text-center">Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of slas(); let i = index">
      <td>{{ item.qmsType | enumToString: enumQMSType }}</td>
      <td>{{ item.typeTitle }}</td>
      <td>
        <span [class]="'badge bg-' + getPriorityColor(item.priority)">
          {{ item.priority | enumToString: enumPriority }}
        </span>
      </td>
      <td>{{ item.responseTime }} {{ item.unit | enumToString: enumUnit }}</td>
      <td>{{ item.resolutionTime }} {{ item.unit | enumToString: enumUnit }}</td>
      <td>{{ item.escalationTime }} {{ item.unit | enumToString: enumUnit }}</td>
      <td>{{ item.status | enumToString: enumRstatus }}</td>
      <td class="text-center">
        <div
          class="dropdown-action"
          dropdown
          placement="bottom right"
          container="#dropDownButton_{{ i }}"
        >
          <button dropdownToggle type="button" class="active-btn" id="dropDownButton_{{ i }}">
            <svg fill="currentColor" width="16" viewBox="0 0 18 18">
              <use href="assets/sprite.svg#svg-cog"></use>
            </svg>
          </button>
          <ul *dropdownMenu class="dropdown-menu dropdown-menu-right">
            <li>
              <button class="dropdown-item" (click)="openEdit(item)">
                <svg width="11" viewBox="0 0 11 10" fill="currentColor">
                  <use href="assets/sprite.svg#edit-s-icon"></use>
                </svg>
                Edit
              </button>
            </li>
            <li>
              <button class="dropdown-item" (click)="delete(item.id)">
                <svg width="12" viewBox="0 0 12 12" fill="currentColor">
                  <use href="assets/sprite.svg#delete-s-icon"></use>
                </svg>
                Delete
              </button>
            </li>
          </ul>
        </div>
      </td>
    </tr>
  </tbody>
</table>
