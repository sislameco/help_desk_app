<div class="card p-3 shadow-sm">
  <h5 class="mb-3">Email Configuration</h5>

  <!-- ======================== -->
  <!-- Email Config Form -->
  <!-- ======================== -->
  <form [formGroup]="form" (ngSubmit)="save()" class="row g-3 mb-4">
    <div class="col-md-4">
      <label>User Name
      <input type="text" class="form-control" formControlName="userName" />
    </label>
    </div>

    <div class="col-md-4">
      <label>Password
      <input type="password" class="form-control" formControlName="password" />
    </label>
    </div>

    <div class="col-md-4">
      <label>Host
      <input type="text" class="form-control" formControlName="host" />
    </label>
    </div>

    <div class="col-md-3">
      <label>SMTP Port
      <input type="number" class="form-control" formControlName="smtpPort" />
    </label>
    </div>

    <div class="col-md-3">
      <label>IMAP Port
      <input type="number" class="form-control" formControlName="imapPort" />
   </label>
    </div>

    <div class="col-md-3">
      <label>Name
      <input type="text" class="form-control" formControlName="name" />
    </label>
    </div>

    <div class="col-md-3">
      <label>BCC
      <input type="text" class="form-control" formControlName="bcc" />
    </label>
    </div>

    <div class="col-md-3">
      <label>
        <input type="checkbox" formControlName="isDefault" />
        Set as Default
      </label>
    </div>

    <div class="col-12">
      <button type="submit" class="btn btn-primary me-2">
        {{ selectedId ? 'Update' : 'Save' }}
      </button>
      <button type="button" class="btn btn-secondary" (click)="resetForm()">Reset</button>
    </div>
  </form>

  <!-- ======================== -->
  <!-- Config List Table -->
  <!-- ======================== -->
  <table class="table table-bordered table-sm">
    <thead class="table-light">
      <tr>
        <th>#</th>
        <th>User</th>
        <th>Host</th>
        <th>SMTP</th>
        <th>IMAP</th>
        <th>Default</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let cfg of emailConfigs(); let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ cfg.userName }}</td>
        <td>{{ cfg.host }}</td>
        <td>{{ cfg.smtpPort }}</td>
        <td>{{ cfg.imapPort }}</td>
        <td>
          <span
            class="badge"
            [class.bg-success]="cfg.isDefault"
            [class.bg-secondary]="!cfg.isDefault"
          >
            {{ cfg.isDefault ? 'Yes' : 'No' }}
          </span>
        </td>
        <td>
          <button class="btn btn-sm btn-outline-primary me-2" (click)="edit(cfg)">
            Edit
          </button>
          <button
            class="btn btn-sm btn-outline-success"
            [disabled]="cfg.isDefault"
            (click)="setDefault(cfg.id)"
          >
            Set Default
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
