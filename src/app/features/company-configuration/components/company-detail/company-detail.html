<form [formGroup]="form" (ngSubmit)="submit()" class="card shadow-sm p-3">
  <!-- ================== -->
  <!-- Company Detail     -->
  <!-- ================== -->
  <h5 class="mb-3">Company Detail</h5>
  <div class="row g-3 align-items-center">
    <div class="col-md-4">
      <label>
        Company Name
        <input type="text" formControlName="name" />
      </label>
    </div>

    <div class="col-md-4">
      <label>
        Short Name
        <input type="text" formControlName="shortName" />
      </label>
    </div>

    <div class="col-md-4">
      <label>
        Description
        <input type="text" formControlName="description" />
      </label>
    </div>

    <div class="col-md-4">
      <label>
        Prefix Ticket
        <input type="text" formControlName="prefixTicket" />
      </label>
    </div>
  </div>

  <!-- ================== -->
  <!-- Authentication     -->
  <!-- ================== -->
  <h5 class="mt-4 mb-3">Authentication</h5>
  <div class="row g-3 align-items-center">
    <div class="col-md-6">
      <label>
        Access Key
        <input type="text" formControlName="accessKey" readonly />
      </label>
    </div>

    <div class="col-md-6">
      <label>
        Secret Key
        <input type="password" class="form-control" formControlName="secretKey" readonly />
      </label>
    </div>
  </div>

  <!-- ================== -->
  <!-- Data Sources Button -->
  <!-- ================== -->
  <h5 class="mt-4 mb-3">Data Sources</h5>
  <!-- <div class="mt-2">
    <button type="button" class="btn btn-outline-primary" (click)="openDataSourceModal()">
      + Manage Data Sources
    </button>
  </div> -->
  <!-- ================== -->
  <!-- Print Data Sources (direct if condition) -->
  <!-- ================== -->
  <!-- Data Sources List -->
  @if ((company?.defineDataSources?.length ?? 0) > 0) {
    <table class="table table-bordered table-striped">
      <thead class="table-light">
        <tr>
          <th style="width: 10%">Type</th>
          <th style="width: 60%">Source</th>
          <th style="width: 30%" class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (source of company?.defineDataSources ?? []; track source.id) {
          <tr>
            <td>{{ source.type | enumToString: enumDataSource }}</td>
            <td>{{ source.source }}</td>
            <td class="text-center">
              <button
                type="button"
                class="btn btn-sm btn-outline-success me-2"
                (click)="downloadJson(source)"
              >
                â¬‡ Download JSON
              </button>
              <button
                type="button"
                class="btn btn-sm btn-outline-primary"
                (click)="syncSource(source)"
              >
                ðŸ”„ Sync
              </button>
            </td>
          </tr>
        }
      </tbody>
    </table>
  } @else {
    <p class="text-muted">No Data Sources available.</p>
  }

  <!-- Save Button -->
  <div class="mt-4 text-end">
    <button type="submit" class="btn btn-primary" [disabled]="form.invalid">Save Changes</button>
  </div>
</form>
